<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="//vogo.github.io/markhtml/css/markhtml.css">
    <title>Index</title>
</head>
<body class="markdown-body">
    <div id="navbar"></div>
    <div id="menu"></div>
    <div class="main" id="app">

<!--
markmeta_author: titlwind
markmeta_date: 2025-11-07
markmeta_title: CodeBuddy Code Development
markmeta_categories: ai
markmeta_tags: ai,codebuddy
-->

<h1>CodeBuddy Code Development</h1>

<hr>

<h2>1. install</h2>

<pre><code class="language-bash">npm install -g @tencent-ai/codebuddy-code
codebuddy --version

cd /path/to/your/project
codebuddy

&gt; 我想给这个 React 组件添加一个加载状态
&gt; 帮我重构这个函数，让它更易读
&gt; 这段代码有什么潜在的性能问题？
&gt; 为这个 API 接口写单元测试

# 添加到 ~/.bashrc 或 ~/.zshrc
alias cb=&quot;codebuddy&quot;
alias cbp=&quot;codebuddy -p&quot;
alias cbr=&quot;codebuddy --resume&quot;

# 使用
cb &quot;快速分析这个错误&quot;
cbp &quot;设计数据库架构&quot;
cbr  # 恢复上次会话

# 查看当前配置
codebuddy config list

# 设置默认模型
codebuddy config set model gpt-5

# 获取特定配置
codebuddy config get model

# 命令行参数 (最高优先级)
├── 项目本地设置 (./.codebuddy/settings.local.json) # 不提交 (添加到 .gitignore)
├── 项目共享设置 (./.codebuddy/settings.json)       # 提交到 Git
└── 用户设置 (~/.codebuddy/settings.json)          # (最低优先级)

</code></pre>

<p>配置范例:</p>

<pre><code class="language-json">{
  &quot;model&quot;: &quot;gpt-5&quot;,
  &quot;cleanupPeriodDays&quot;: 30,
  &quot;env&quot;: {
    &quot;NODE_ENV&quot;: &quot;development&quot;,
    &quot;DEBUG&quot;: &quot;true&quot;
  },
  &quot;includeCoAuthoredBy&quot;: false,
  &quot;permissions&quot;: {
    &quot;allow&quot;: [
      &quot;Read&quot;,                          // 允许读取文件
      &quot;Edit&quot;,                          // 允许编辑文件
      &quot;Bash(git:*)&quot;,                   // 允许所有 git 命令
      &quot;Bash(npm:install,npm:test)&quot;,    // 允许特定 npm 命令
      &quot;Edit(src/**/*.js)&quot;              // 只允许编辑 src 目录下的 JS 文件
    ],
    &quot;ask&quot;: [
      &quot;Bash(curl:*)&quot;,                  // 询问后允许 curl 命令
      &quot;WebFetch&quot;,                      // 询问后允许网络请求
      &quot;Bash(docker:*)&quot;                 // 询问后允许 Docker 命令
    ],
    &quot;deny&quot;: [
      &quot;Bash(rm:*)&quot;,                    // 禁止删除命令
      &quot;Bash(sudo:*)&quot;,                  // 禁止 sudo 命令
      &quot;Edit(**/*.env)&quot;,                // 禁止编辑环境变量文件
      &quot;Read(/etc/**)&quot;                  // 禁止读取系统配置文件
    ],
    &quot;additionalDirectories&quot;: [&quot;/tmp&quot;, &quot;/var/log&quot;],
    &quot;defaultMode&quot;: &quot;default&quot;
  },
  &quot;hooks&quot;: {
    &quot;PreToolUse&quot;: &quot;echo 'About to use tool: $TOOL_NAME'&quot;
  },
  &quot;enableAllProjectMcpServers&quot;: false,
  &quot;enabledMcpjsonServers&quot;: [&quot;filesystem&quot;, &quot;git&quot;],
  &quot;disabledMcpjsonServers&quot;: [&quot;dangerous-tool&quot;],
  &quot;autoCompactEnabled&quot;: true,
  &quot;autoUpdates&quot;: true,
  &quot;apiKeyHelper&quot;: &quot;/usr/local/bin/get-api-key.sh&quot;
}
</code></pre>

<hr>

<h2>2. 单次命令模式</h2>

<pre><code class="language-bash"># 直接提问
codebuddy -p &quot;优化这个 SQL 查询的性能&quot;

# 管道输入
cat error.log | codebuddy -p &quot;分析这些错误日志&quot;

# 文件分析（需要授权时必须添加 --dangerously-skip-permissions）
codebuddy -p &quot;审查 src/utils.js 的代码质量&quot; --dangerously-skip-permissions

# 项目重构（需要文件操作授权）
codebuddy -p &quot;将所有组件从 class 组件迁移到函数组件&quot; --dangerously-skip-permissions

# 代码规范（需要文件读取授权）
codebuddy -p &quot;检查整个项目的 TypeScript 类型定义&quot; --dangerously-skip-permissions

# 测试覆盖（需要文件操作授权）
codebuddy -p &quot;为 services 目录下的所有文件添加单元测试&quot; --dangerously-skip-permissions


</code></pre>

<h2>3. 会话</h2>

<pre><code class="language-bash"># 恢复最近的对话
codebuddy --resume

# 恢复特定的对话会话
codebuddy --resume session-id-12345

</code></pre>

<h2>4. 常见工作流</h2>

<pre><code class="language-bash">codebuddy
# 分析这个界面设计
# [拖拽图片到终端] # 自动识别图像文件并处理

&gt; 根据这个设计稿实现 React 组件 @/path/to/design.png

# macOS
pbpaste | codebuddy -p &quot;这个错误信息是什么意思？&quot;

# 审查单个文件
codebuddy -p &quot;审查这个文件的代码质量&quot; src/components/UserForm.tsx

# 审查整个提交
git diff HEAD~1 | codebuddy -p &quot;审查这次提交的代码变更&quot;

# 审查 Pull Request
gh pr diff 123 | codebuddy -p &quot;分析这个 PR 的影响和风险&quot;

# 生成审查报告（JSON格式便于后续处理）
codebuddy -p &quot;生成详细的代码审查报告&quot; --output-format json &gt; report.json

# 检查编码规范
codebuddy -p &quot;检查 src/ 目录是否遵循团队的编码规范&quot;
</code></pre>

<h2>5. 自定义斜杠命令</h2>

<p>自定义命令通过在特定目录中创建 .md (Markdown) 文件来定义。</p>

<ul>
<li>项目级命令: 在您的项目根目录下创建 <code>.codebuddy/commands/</code> 文件夹。此处的命令对所有项目协作者可用。</li>
<li>个人全局命令: 在您的用户主目录下创建 <code>~/.codebuddy/commands/</code> 文件夹。此处的命令在您所有的项目中都可用。</li>
</ul>

<p>创建一个命令,只需在上述任一目录中添加一个 .md 文件即可。例如,test.md 文件会自动注册为 /test 命令。</p>

<p>子目录命令:</p>

<pre><code class="language-bash">commands/test.md → /test
commands/frontend/build.md → /frontend:build
commands/backend/deploy/staging.md → /backend:deploy:staging
</code></pre>

<hr>

<p>范例1:</p>

<pre><code>---
description: &quot;为我的项目运行单元测试并报告结果。&quot;
argument-hint: &quot;[test-file]&quot;
---

请为我运行 `npm run test -- [test-file]` 命令,并总结测试结果。如果未提供测试文件,则运行所有测试。
</code></pre>

<hr>

<p>范例2:</p>

<pre><code>---
description: &quot;发送一个可定制的问候。&quot;
argument-hint: &quot;[name]&quot;
---

向 **$1** 说&quot;你好！&quot;。如果 $1 为空,则向&quot;世界&quot;问好。
</code></pre>

<hr>

<p>范例3:</p>

<pre><code>---
description: &quot;显示当前的 git 仓库状态并进行分析。&quot;
---

!`git status`

请基于上面的 `git status` 输出,为我总结当前分支的状况。
</code></pre>

<h2>6. 记忆</h2>

<p>记忆范围</p>

<ul>
<li>用户级（user）：存放与个人长期偏好和习惯相关的信息</li>
<li>项目级（project）：存放与当前项目共享的通用信息
对应文件位置：</li>
<li>用户级：~/.codebuddy/CODEBUDDY.md</li>
<li>项目级：./CODEBUDDY.md
记忆内容以章节形式追加到文件中的 <code>## CodeBuddy Added Memories</code> 段落。</li>
</ul>

<p>记忆引用文件:</p>

<pre><code>## CodeBuddy Added Memories
@./docs/team-conventions.md
- 项目默认分支为 main
</code></pre>

<h2>7. agents</h2>

<p>支持两级来源，按优先级智能合并：</p>

<ul>
<li>项目级：.codebuddy/agents/</li>
<li>个人全局：~/.codebuddy/agents/</li>
</ul>

<p>标签:</p>

<ul>
<li>(project)：来自项目根的 .codebuddy/agents 目录</li>
<li>(project:review)：来自 .codebuddy/agents/review/ 子目录</li>
<li>(user)：来自 ~/.codebuddy/agents 目录</li>
<li>(user:experiments:lint)：来自 ~/.codebuddy/agents/experiments/lint/ 子目录
该标签会自动拼接到 description 末尾，例如：代码审阅 (project:review)</li>
</ul>

<p>范例1</p>

<pre><code>---
name: &quot;my-agent&quot;
description: &quot;负责代码审阅与建议&quot;
model: &quot;gpt-4o&quot;
tools: &quot;bash,fs,github&quot;
color: &quot;#4A90E2&quot;
---

这里是该子代理的系统指令与工作说明……
</code></pre>

<p>运行agents:</p>

<pre><code class="language-bash">cbp &quot;use (my-agent) to do something&quot; --dangerously-skip-permissions
</code></pre>
</div>
<script src="//vogo.github.io/markhtml/js/markhtml.js"></script>
</body>
</html>
