<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="//vogo.github.io/markhtml/css/markhtml.css">
    <title>Index</title>
</head>
<body class="markdown-body">
    <div id="navbar"></div>
    <div id="menu"></div>
    <div class="main" id="app">

<!--
markmeta_author: titlwind
markmeta_date: 2025-11-07
markmeta_title: Claude Code Development
markmeta_categories: ai
markmeta_tags: ai,claude-code
-->

<h1>claude code development</h1>

<h2>1. 安装</h2>

<pre><code class="language-bash">sudo npm install -g @anthropic-ai/claude-code

# upgrade
sudo npm install -g @anthropic-ai/claude-code@latest
</code></pre>

<h2>1.1 使用deepseek模型</h2>

<p>配置环境变量，直接使用 DeepSeek API 接入 Claude Code。</p>

<pre><code class="language-bash">export ANTHROPIC_BASE_URL=https://api.deepseek.com/anthropic
export ANTHROPIC_AUTH_TOKEN=${DEEPSEEK_API_KEY}
export API_TIMEOUT_MS=600000
export ANTHROPIC_MODEL=deepseek-chat
export ANTHROPIC_SMALL_FAST_MODEL=deepseek-chat
export CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC=1

# 启动
claude
</code></pre>

<h2>1.2 使用deepseek模型(自定义命令)</h2>

<p>通过创建自定义脚本，实现独立的 DeepSeek 调用命令，互不影响。</p>

<pre><code class="language-bash">mkdir -p ~/claude-model/bin
# 将 bin 目录加入 PATH，例如在 ~/.zshrc 中添加:
# export PATH=&quot;$HOME/claude-model/bin:$PATH&quot;
</code></pre>

<p><strong>创建脚本</strong> <code>~/claude-model/bin/claude-deepseek</code></p>

<pre><code class="language-bash">#!/usr/bin/env bash
# Wrapper for Claude Code CLI using DeepSeek API

CLAUDE_BIN=&quot;$(which claude)&quot;

# 配置 DeepSeek 环境变量
export ANTHROPIC_BASE_URL=&quot;https://api.deepseek.com/anthropic&quot;
export ANTHROPIC_AUTH_TOKEN=&quot;YOUR_DEEPSEEK_API_KEY&quot;
export ANTHROPIC_MODEL=&quot;deepseek-chat&quot;
export ANTHROPIC_SMALL_FAST_MODEL=&quot;deepseek-chat&quot;
export API_TIMEOUT_MS=600000
export CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC=1

# 使用独立的配置目录，避免与原版配置冲突
export CLAUDE_CONFIG_DIR=&quot;$HOME/.claude-deepseek&quot;

exec &quot;$CLAUDE_BIN&quot; &quot;$@&quot;
</code></pre>

<p><strong>赋予权限并使用</strong></p>

<pre><code class="language-bash">chmod +x ~/claude-model/bin/claude-deepseek

# 使用新命令
claude-deepseek
</code></pre>

<h2>1.3. 路由代理访问方式</h2>

<pre><code class="language-bash">sudo npm install -g @musistudio/claude-code-router@latest
</code></pre>

<p><code>vi ~/.claude-code-router/config.json</code>, more config see <a href="https://github.com/musistudio/claude-code-router:" target="_blank">https://github.com/musistudio/claude-code-router:</a></p>

<pre><code class="language-json">{
  &quot;PROXY_URL&quot;: &quot;http://127.0.0.1:7890&quot;,
  &quot;LOG&quot;: true,
  &quot;API_TIMEOUT_MS&quot;: 600000,
  &quot;NON_INTERACTIVE_MODE&quot;: false,
  &quot;Providers&quot;: [
    {
      &quot;name&quot;: &quot;deepseek&quot;,
      &quot;api_base_url&quot;: &quot;https://api.deepseek.com/anthropic&quot;,
      &quot;api_key&quot;: &quot;sk-xxx&quot;,
      &quot;models&quot;: [&quot;deepseek-chat&quot;, &quot;deepseek-reasoner&quot;],
      &quot;transformer&quot;: {
        &quot;use&quot;: [&quot;deepseek&quot;],
        &quot;deepseek-chat&quot;: {
          &quot;use&quot;: [&quot;tooluse&quot;]
        }
      }
    }
  ],
  &quot;Router&quot;: {
    &quot;default&quot;: &quot;deepseek,deepseek-chat&quot;,
    &quot;background&quot;: &quot;deepseek,deepseek-chat&quot;,
    &quot;think&quot;: &quot;deepseek,deepseek-reasoner&quot;,
    &quot;longContext&quot;: &quot;deepseek,deepseek-reasoner&quot;,
    &quot;longContextThreshold&quot;: 60000
  }
}
</code></pre>

<p><strong>通过代理启动claud code</strong>: <code>ccr code</code></p>

<h2>2. 基本使用</h2>

<ul>
<li>go to project directory</li>
<li>初始化配置：通过在项目根目录创建 CLAUDE.md 文件（可使用 <code>/init</code> 命令），可以为 Claude 提供项目结构、技术栈、编码规范等信息，这有助于它做出更准确的修改。</li>
</ul>

<h3>2.1. 计划模式</h3>

<ul>
<li>“计划模式”：对于不熟悉的代码库或复杂操作，可以先让 Claude 进入“计划模式”（通过 <code>--plan</code> 参数或在指令前加 <code>think</code>/<code>ultrathink</code> 关键词）。在此模式下，Claude 仅进行分析和规划而不会直接执行更改，方便你确认其理解是否正确</li>
<li>使用 Shift+Tab 切换到 Plan 模式，让 Claude 先阐述它的计划再执行，这对于复杂操作很实用。</li>
</ul>

<h3>2.2. 风格</h3>

<ul>
<li>通过 /output-style 命令切换输出风格（如 explanatory 或 learning）</li>
</ul>

<h2>3. 链接IDE</h2>

<p>安装： Claude Code for VSCode 插件, 通过 <code>/ide</code> 命令链接ide， 链接 IDE 功能是什么</p>

<ul>
<li>感知上下文：直接获取你在 IDE 中打开的文件、选中的代码段以及项目的整体结构，使其分析和操作更精准。</li>
<li>在 IDE 中显示差异：代码的更改可以直接在 IDE 的差异查看器（diff viewer）中显示，而不是仅仅在终端中，更便于查看和审核。</li>
<li>使用快捷键快速引用：可以通过快捷键（如 Mac 上的 Cmd+Option+K 或 Windows/Linux 上的 Alt+Ctrl+K）快速插入文件引用（例如 @File#L1-99）。</li>
<li>共享诊断信息：IDE 中的诊断错误（如 lint 错误、语法错误等）可以在你工作时自动与 Claude Code 共享，帮助它更好地理解问题。</li>
</ul>

<h2>4. Agents（子代理）</h2>

<p>Claude Code 的 <strong>Sub-agents（子代理）</strong> 功能，可以根据特定任务创建专属的AI助手，它们拥有独立的上下文和精密的工具权限，非常适合处理代码审查、调试、UI设计等专业性强的任务。</p>

<p>几个典型场景：</p>

<table>
<thead>
<tr>
<th align="left"><strong>场景</strong></th>
<th align="left"><strong>主代理 (Claude)</strong></th>
<th align="left"><strong>子代理 (Sub-agent)</strong></th>
<th align="left"><strong>优势</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>代码审查</strong></td>
<td align="left">接收编写新功能的指令</td>
<td align="left">被<strong>自动委派</strong>或<strong>显式调用</strong>，专门检查代码规范、安全性</td>
<td align="left"><strong>上下文隔离</strong>：主对话线程不被审查细节干扰，保持清晰</td>
</tr>

<tr>
<td align="left"><strong>博客写作</strong></td>
<td align="left">负责撰写文章核心内容</td>
<td align="left">被调用以生成博客封面图或SVG图标</td>
<td align="left"><strong>专业化处理</strong>：每个代理专注于其最擅长的领域，输出质量更高</td>
</tr>

<tr>
<td align="left"><strong>复杂探索</strong></td>
<td align="left">将任务（如为项目生成文档）分解</td>
<td align="left"><strong>并行启动</strong>多个子代理，分别处理不同模块</td>
<td align="left"><strong>高效并行</strong>：将潜在耗时的单线程任务拆解为高效并行流程</td>
</tr>
</tbody>
</table>

<h3>🛠️ 如何配置与使用 Sub-agents</h3>

<h4>创建 Sub-agent</h4>

<ol>
<li><strong>打开管理界面</strong>：在 Claude Code 会话中输入命令 <code>/agents</code>。</li>
<li><strong>创建新代理</strong>：选择 &ldquo;Create New Agent&rdquo;。</li>
<li><strong>定义代理属性</strong>：你需要配置以下几个核心要素：

<ul>
<li><strong><code>name</code></strong>：代理的唯一标识符（小写字母+连字符），如 <code>code-reviewer</code>。</li>
<li><strong><code>description</code></strong>：清晰描述代理的用途和触发场景，这决定了Claude何时会自动委派任务。</li>
<li><strong><code>tools</code></strong>：授予其必要的工具权限列表（如 <code>Read, Grep, Bash</code>），遵循<strong>权限最小化</strong>原则以保证安全。</li>
<li><strong><code>system prompt</code></strong>：在Markdown文件中编写详细的行为规范、工作流程和约束条件，这是代理的&rdquo;灵魂&rdquo;。</li>
</ul></li>
</ol>

<p>配置路径:</p>

<ul>
<li>Project (.claude/agents/)</li>
<li>Personal (~/.claude/agents/)</li>
</ul>

<p>参考社区 sub-agents 配置:</p>

<ul>
<li><a href="https://github.com/vijaythecoder/awesome-claude-agents" target="_blank">https://github.com/vijaythecoder/awesome-claude-agents</a></li>
<li><a href="https://github.com/0xfurai/claude-code-subagents" target="_blank">https://github.com/0xfurai/claude-code-subagents</a></li>
<li><a href="https://github.com/zhsama/claude-sub-agent" target="_blank">https://github.com/zhsama/claude-sub-agent</a></li>
</ul>

<h4>调用 Sub-agent</h4>

<ul>
<li><strong>自动委派</strong>：当你提出的任务描述与某个子代理的 <code>description</code> 匹配时，Claude Code 会自动将任务委派给它。</li>
<li><strong>显式调用</strong>：你可以直接在对话中通过自然语言指定，例如：<strong><code>&gt; 使用 code-reviewer 子代理检查我最近的更改</code></strong> 或 <strong><code>&gt; 让 debugger 子代理分析这个测试失败</code></strong>。</li>
</ul>

<h3>💡 进阶技巧与最佳实践</h3>

<ul>
<li><strong>链式调用</strong>：对于复杂任务，你可以串联多个子代理。例如，你可以发出指令：<strong><code>&gt; 先用 code-analyzer 查找性能问题，再用 optimizer 修复</code></strong>。这能让不同专家按顺序协作，提升任务完成的准确性。</li>
<li><strong>迭代优化</strong>：Sub-agent 的效果并非一蹴而就。一个有效的建议是&rdquo;<strong>Recommended: Generate with Claude first, then customize</strong>&ldquo;。即先让 Claude 在普通聊天中尝试执行该专业任务，然后将表现优秀的回答作为子代理系统提示词的初版，再不断根据实际使用效果进行编辑和优化。</li>
<li><strong>安全第一</strong>：在配置 <code>tools</code> 时，务必坚持权限最小化原则。例如，一个只负责审查代码的代理，通常只应授予其 <code>Read</code> 权限，从根本上杜绝它越界修改代码的可能。</li>
</ul>

<p>希望这份指南能帮助你快速上手 Claude Code 的 Sub-agents 功能。如果你在创建第一个子代理时遇到问题，比如不确定某个任务应该配置哪些工具权限，可以随时追问。</p>

<h2>5. 自定义命令</h2>

<p>在 Claude Code 中创建自定义命令（Custom Commands）可以让你把一些复杂或常用的指令固化下来，极大地提升工作效率。下面我将为你介绍如何创建和使用它们，并提供一个包含多种场景的实用范例表格。</p>

<p>自定义命令通过创建特定的 Markdown (<code>.md</code>) 文件来实现，你需要根据命令的适用范围，将其放在正确的目录下：</p>

<ul>
<li><strong>项目级命令</strong>：仅在当前项目内可用。
创建路径：<code>项目根目录/.claude/commands/你的命令名.md</code></li>
<li><strong>全局命令</strong>：在你所有的项目中都可用。
创建路径：<code>~/.claude/commands/你的命令名.md</code> (你的用户主目录下)</li>
</ul>

<p>创建文件并编辑后，<strong>重启 Claude Code</strong> 即可通过输入 <code>/</code> 来看到并使用你新创建的命令。</p>

<h3>💡 高级用法与技巧</h3>

<p>除了上面表格中的基础用法，自定义命令还支持一些高级功能，可以让你的命令更加强大和智能。</p>

<ul>
<li><strong>参数传递</strong>：在你的命令提示词中，可以使用 <strong><code>$ARGUMENTS</code></strong> 作为占位符来接收用户输入。例如，一个查询天气的命令提示词可以是：<code>查询 $ARGUMENTS 的天气</code>。当你使用 <code>/weather 北京</code> 时，Claude 收到的指令就是&rdquo;查询 北京 的天气&rdquo;。也支持类似 Shell 脚本的 <strong><code>$1</code></strong>, <strong><code>$2</code></strong> 位置参数。</li>
<li><strong>执行 Bash 命令</strong>：在自定义命令中，你可以通过 <strong>!<code>command</code></strong> 的语法在执行时运行 Bash 命令，并将其输出作为上下文。这在获取 Git 状态、文件列表等信息时非常有用。请注意，这通常需要在 Frontmatter 中通过 <code>allowed-tools</code> 字段授予相应的 <code>Bash</code> 工具权限。</li>
<li><strong>文件引用</strong>：在命令中，使用 <strong><code>@文件名</code></strong> 可以引用当前工作目录下的文件内容。例如，<code>请总结 @README.md 的主要内容</code>。</li>
<li><strong>使用 Frontmatter 精细控制</strong>：在 Markdown 文件顶部的 <code>---</code> 区域内（称为 Frontmatter），你可以设置更多选项：

<ul>
<li><code>description</code>：命令的简短描述，会在命令列表中显示。</li>
<li><code>argument-hint</code>：参数的提示信息，例如 <code>[commit message]</code>。</li>
<li><code>allowed-tools</code>：明确此命令可以使用的工具列表，例如 <code>Bash(git add:*)</code>，遵循权限最小化原则。</li>
<li><code>model</code>：指定执行此命令时使用的模型。</li>
</ul></li>
</ul>

<h3>⚠️ 温馨提示</h3>

<ul>
<li><strong>权限安全</strong>：在授予 <code>allowed-tools</code> 权限，尤其是 <code>Bash</code> 和 <code>Edit</code>（文件编辑）时，请务必谨慎，确保命令本身是安全可靠的。</li>
<li><strong>迭代优化</strong>：自定义命令的效果可能需要你根据实际使用反馈，不断调整和优化提示词，就像优化其他 AI 提示词一样。</li>
</ul>

<p>希望这些范例和说明能帮助你更好地利用 Claude Code 的自定义命令功能。如果你对实现某个特定功能的命令有疑问，或者想了解更复杂的组合用法，随时可以再问我。</p>

<h2>6. 配置 MCP (Model Context Protocol)</h2>

<p>MCP (Model Context Protocol) 是一种开放标准，允许 AI 助手（如 Claude）安全地连接到本地或远程的数据源和工具。通过配置 MCP 服务器，你可以让 Claude 访问数据库、文件系统、API 等外部资源。</p>

<p>配置路径:</p>

<ul>
<li>用户级别: <code>~/.claude.json</code> 文件的 mcpServers 字段</li>
<li>项目级别: 项目目录下 <code>.mcp.json</code> 文件</li>
</ul>

<p>配置文件的基本结构如下：</p>

<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;server-name&quot;: {
      &quot;command&quot;: &quot;executable-command&quot;,
      &quot;args&quot;: [&quot;arg1&quot;, &quot;arg2&quot;],
      &quot;env&quot;: {
        &quot;ENV_VAR&quot;: &quot;value&quot;
      }
    }
  }
}
</code></pre>

<p>命令添加:</p>

<pre><code class="language-bash"># 通过 -s user 指定用户级别
claude mcp add &lt;MCP服务器名称&gt; -s user &lt;启动命令&gt;
claude mcp remove &lt;MCP服务器名称&gt; -s user

claude mcp add chrome-devtools -s user -- npx chrome-devtools-mcp@latest
</code></pre>

<p>以下是几个常见的 MCP 服务器配置范例：</p>

<h4>6. Chrome DevTools (浏览器调试)</h4>

<p>允许 Claude 控制 Chrome 浏览器进行调试、页面分析等。
需要先安装：<code>npm install -g chrome-devtools-mcp</code></p>

<p>添加: <code>claude mcp add chrome-devtools -s user -- npx chrome-devtools-mcp@latest</code></p>

<p>手动配置:</p>

<pre><code class="language-json">&quot;mcp__chrome-devtools&quot;: {
  &quot;command&quot;: &quot;npx&quot;,
  &quot;args&quot;: [
    &quot;-y&quot;,
    &quot;chrome-devtools-mcp@latest&quot;
  ]
}
</code></pre>

<h3>6.3 调试与验证</h3>

<p>配置完成后，重启 Claude Code。你可以通过询问 Claude &ldquo;列出当前可用的 MCP 工具&rdquo; 来验证服务器是否加载成功。</p>

<h3>6.3 调试与验证</h3>

<p>配置完成后，重启 Claude Code。你可以通过询问 Claude &ldquo;列出当前可用的 MCP 工具&rdquo; 来验证服务器是否加载成功。</p>

<h2>7. Plugins (插件)</h2>

<p>Claude Code 的插件系统（Plugins）允许你扩展其能力，包括自定义命令、Agents、Skills 和 MCP 服务器等。</p>

<h3>7.1 安装与使用</h3>

<h4>7.1.1 发现插件</h4>

<p>你可以通过以下两种方式查看市场上有哪些可用的插件：</p>

<ol>
<li><p><strong>命令行交互界面</strong>：
在 Claude Code 中输入 <code>/plugin</code> 命令，会打开一个交互式界面。使用 <code>Tab</code> 键在不同标签页之间切换（如 Discover, Installed, Marketplaces）。在 <strong>Discover</strong> 标签页中，你可以浏览所有已添加市场的插件列表。</p></li>

<li><p><strong>网页浏览</strong>：
访问非官方的插件索引站 <a href="https://claude-plugins.dev/" target="_blank">claude-plugins.dev</a> 浏览社区插件，或者直接查看 <a href="https://github.com/anthropics/claude-code/tree/main/plugins" target="_blank">Anthropic 官方 GitHub 仓库</a>。</p></li>
</ol>

<h4>7.1.2 安装插件</h4>

<p>安装插件最简单的方法是使用 <code>/plugin install</code> 命令。</p>

<p><strong>推荐安装方式：项目级别 (Project Scope)</strong>
建议使用 <code>--scope project</code> 参数将插件安装到当前项目。这样做的好处是：</p>

<ul>
<li><strong>隔离性</strong>：不同项目可以使用不同版本的插件，避免冲突。</li>
<li><strong>团队共享</strong>：配置会保存在项目的 <code>.claude/settings.json</code> 中，团队成员拉取代码后可以获得一致的开发环境。</li>
</ul>

<p><strong>基本语法</strong>：</p>

<pre><code class="language-bash">/plugin install &lt;plugin-id&gt; --scope project
</code></pre>

<p><strong>示例</strong>：
安装官方提供的 Frontend Design 插件到当前项目：</p>

<pre><code class="language-bash">/plugin install frontend-design@claude-code-plugins --scope project
</code></pre>

<p>或者</p>

<pre><code class="language-bash">/plugin install @anthropics/claude-code-plugins/frontend-design --scope project
</code></pre>

<p>如果不加 <code>--scope project</code>，默认会安装到<strong>用户级别 (User Scope)</strong>，即对该用户的所有项目生效。</p>

<h3>7.2 常用插件推荐</h3>

<table>
<thead>
<tr>
<th align="left">插件名</th>
<th align="left">ID</th>
<th align="left">说明</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>Frontend Design</strong></td>
<td align="left"><code>frontend-design@claude-code-plugins</code></td>
<td align="left">专注于生成高质量、非通用的前端界面代码，包含设计审美和最佳实践。</td>
</tr>

<tr>
<td align="left"><strong>Commit Commands</strong></td>
<td align="left"><code>@anthropics/claude-code-plugins/commit-commands</code></td>
<td align="left">包含 git 提交、推送和创建 PR 的相关命令。</td>
</tr>

<tr>
<td align="left"><strong>Code Review</strong></td>
<td align="left"><code>@anthropics/claude-code-plugins/code-review</code></td>
<td align="left">自动化的代码审查插件，提供基于置信度的审查意见。</td>
</tr>
</tbody>
</table>

<h3>7.3 使用建议</h3>

<ol>
<li><strong>按需安装</strong>：不要一次性安装过多插件，以免造成环境混乱或上下文过载。根据当前项目的需求选择合适的插件。</li>
<li><strong>查看文档</strong>：许多插件（特别是官方插件）在 GitHub 上有详细的 <code>SKILL.md</code> 或说明文档，安装前建议阅读以了解其具体能力和触发方式。</li>
<li><strong>插件管理</strong>：

<ul>
<li>列出已安装插件：<code>/plugin list</code> (或使用 <code>npx claude-plugins list</code>)</li>
<li>移除插件：<code>/plugin remove &lt;plugin-id&gt;</code></li>
<li>更新插件：通常需要重新安装最新版本。</li>
</ul></li>
</ol>

<blockquote>
<p><strong>提示</strong>：插件本质上是 Skills、Prompts 和工具配置的集合。如果你发现某个插件特别好用，可以研究其源码（通常是开源的），学习如何编写更好的 System Prompts 和 Skills。</p>
</blockquote>

<h2>A. 感受</h2>

<ul>
<li>2025-11-10: claude code 模型在编码上的表现还是最优秀的</li>
<li>2025-09-10： 需要结合IDE有比较好的用户体验,但token消耗太快是一个比较大的问题</li>
</ul>
</div>
<script src="//vogo.github.io/markhtml/js/markhtml.js"></script>
</body>
</html>
